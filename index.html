<!DOCTYPE html>
<html>
<head>
    <title>SQLite Database Table</title>
    <script src="dist/sql-wasm.js"></script>
    <script>
        window.onload = async function() {
            const SQL = await initSqlJs({
                // Required to load the wasm binary asynchronously.
                // You can host it wherever you want. You can omit locateFile completely when running in node
                locateFile: file => "dist/sql-wasm.wasm"
            });

            // Load SQLite database file
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'database.sqlite', true);
            xhr.responseType = 'arraybuffer';

            xhr.onload = function(e) {
                var uInt8Array = new Uint8Array(this.response);
                var db = new SQL.Database(uInt8Array);

                // Example query
                var query = "SELECT * FROM events;";
                var result = db.exec(query);

                // Handle the query result
                if (result.length > 0) {
                    var data = result[0].values;
                    console.log(data); // Check the retrieved data

                    // Display data on the webpage
                    var outputElement = document.getElementById('data-container');
                    var table = document.createElement('table');
                    data.forEach(function(row) {
                        var tr = document.createElement('tr');
                        row.forEach(function(cell) {
                            var td = document.createElement('td');
                            td.textContent = cell;
                            tr.appendChild(td);
                        });
                        table.appendChild(tr);
                    });
                    outputElement.appendChild(table);
                }
            };

            xhr.send();
        };
    </script>
</head>
<body>
    <h1>Data from SQLite Database</h1>
    <div id="data-container"></div>
</body>
</html>